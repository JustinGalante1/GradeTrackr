{% extends 'gradetracker/template.html' %}
{% block content %}
{% load static %}



        

        
{% if courses_list %}
<div class="m container justify-content-center" id="main">

  <!--<a href="{% url 'gradetracker:add' %}" class="btn btn-primary" style="width: auto; border-radius: 99px;box-shadow: 0 5px 15px rgba(18, 73, 255, 0.4);"><b>&nbsp;<span class="ti-plus" style="vertical-align: -1.85px;"></span>&nbsp;&nbsp;add another course&nbsp;</b></a>-->


    <!--<ul>-->
        <div class="cardGrid">


          <!--DASHBOARD OVERVIEW CARD-->
    <div class="card scene_element scene_element--fadein" style="width: auto; float:left" id="beautifiedCard">
      <div class="card-body" style="padding-bottom: 1.75%;">
        <h4 class="card-title"><b>At a glance<span style="float:right; color:rgb(0, 165, 27)">X.X GPA</span></b></h4>
        <p class="card-text" style="color:black; text-align: left;">
          Use this space for gain/loss percent for classes, semester GPA, etc
          
        </p>
        <span style="color:black; float: right;"><b>{{cum}} credits being tracked</b></span>

      </div>
    </div>
    <!--END OF DASHBOARD OVERVIEW CARD-->



    {% for course in courses_list %}
        
        <!--<li class="list-group-item">-->      
            <div class="card scene_element scene_element--fadein" style="width: auto" id="beautifiedCard">
                <div class="card-body" style="padding-bottom: 1.75%;">
                    <!-- List all the courses associated with a user -->
                    <a href="{% url 'gradetracker:course_overview' course_id=course.id%}" class="mainLogo"> <h4 class="card-title"><b>{{ course.name }}
                      
                      {% if course.avgGrade.didGradeGoUp %}
                      <span style="float:right; color:rgb(0, 165, 27)">{{ course.avgGrade.gradePercentage }}%</span>
                      {% else %}
                      <span style="float:right; color:red">{{ course.avgGrade.gradePercentage }}%</span>
                      {% endif %}
                    </b></h4></a>


                  <p class="card-text" style="color:black; text-align: center;">

                   
                    <a class="nav-item nav-link" href="{% url 'gradetracker:gradecat' course_id=course.id%}">Add a Grade Category</a>
                    <a class="nav-item nav-link" href="{% url 'gradetracker:addAssignment' course_id=course.id%}">Add an assignment</a>
                    
                    <br />
                    

                  </p>


                  <a href="{% url 'gradetracker:delete_course' course_id=course.id%}" onclick="return confirm('Are you sure you want to delete this course?')" id="miniButtonRed"><span class="ti-trash"></span></a>
                  <a href="{% url 'gradetracker:duplicate_course' course_id=course.id%}" onclick="" id="miniButtons"><span class="ti-layers"></span></a>
                  <a href="{% url 'gradetracker:course_overview' course_id=course.id%}" onclick="" id="miniButtons" style="vertical-align: 1px; padding-right: 1%;"><span class="ti-new-window"></span></a>
                      
                  <label class="switch" style="vertical-align: 18.5px;margin-left: 1.25%;">
                    <input type="checkbox" onclick="calc('{{course.id}}','{{course.Include_In_GPA}}');" {% if course.Include_In_GPA %} checked{% endif %}>
                    <span class="slider round"></span>
                  </label><span style="font-size: 0.4em;vertical-align: 2.75px;">&nbsp;&nbsp;&nbsp;<b>INCLUDE IN GPA</b></span>

                  <span style="color:black; float: right;"><b>{{ course.number_Of_Credits|floatformat }} credits</b></span>

                </div>
              </div>
              
        <!--</li>-->
        
    {% endfor %}
            </div>
    
    </ul>

</div>

<!-- If the user has no courses -->
{% else %}
<div>
<p> <img src = "{% static 'gradetracker/addcourse.png' %}" width="25%" style="margin-top: 4%;margin-right:8%;margin-left:8%;float: right;"><br/>
    <h1 style="color: rgb(110, 72, 128);margin-top: 4%;margin-left: 6%;font-size: 5vw;line-height: 130%;">Get started tracking your academic performance.</h1>
    <a href="{% url 'gradetracker:add' %}" class="addCourseButton" style="margin-left: 6%;margin-top:2%"><b>add course&nbsp;&nbsp;<span class="ti-hand-point-right" style="vertical-align: -1px;"></span></b></a>

</p>
</div>

 

{% endif %}


    <script>
      function calc(coursePassedIn,shouldIncludeInGPA)
{
  $.ajax({
        type:'POST',
        url:'{% url "gradetracker:gpaInclude" %}',
        data:{
          csrfmiddlewaretoken:'{{ csrf_token }}',
          courseToAffect: coursePassedIn,
          toggle: shouldIncludeInGPA,
            
        },
        success:function(json){
            console.log(coursePassedIn)
        },
        error : function(xhr,errmsg,err) {
        console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
    }
    });
}
        
            </script>
 
        

{% endblock content %}